<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <img src="WhatsApp Image 2020-07-07 at 15.12.18.jpeg" alt="">
    <div class="container">
        
        <div class="row">
            <div class="col-md-4 offset-md-4 tarjeta">                
                <h3 id="nombre">Ninja Motor Ride</h3>
                <select class="custom-select" id="ciudad_origen">
                    <option selected id="ciudadselector">Ciudad de Origen</option>
                    <option value="Iquique">Iquique</option>
                    <option value="Antofagasta">Antofagasta</option>
                    <option value="Copiapó">Copiapó</option>
                    <option value="La Serena">La Serena</option>
                    <option value="Valparaíso">Valparaíso</option>
                    <option value="Rancagua">Rancagua</option>
                    <option value="Talca">Talca</option>
                    <option value="Concepción">Concepción</option>
                    <option value="Temuco">Temuco</option>
                    <option value="Puerto Montt">Puerto Montt</option>
                    <option value="Coyhaique">Coyhaique</option>
                    <option value="Punta Arenas">Punta Arenas</option>
                    <option value="Santiago">Santiago</option>
                    <option value="Valdivia">Valdivia</option>
                    <option value="Arica">Arica</option>
                </select>
                <select class="custom-select" id="ciudad_destino">
                    <option selected id="ciudadselector">Ciudad de Destino</option>
                    <option value="Iquique">Iquique</option>
                    <option value="Antofagasta">Antofagasta</option>
                    <option value="Copiapó">Copiapó</option>
                    <option value="La Serena">La Serena</option>
                    <option value="Valparaíso">Valparaíso</option>
                    <option value="Rancagua">Rancagua</option>
                    <option value="Talca">Talca</option>
                    <option value="Concepción">Concepción</option>
                    <option value="Temuco">Temuco</option>
                    <option value="Puerto Montt">Puerto Montt</option>
                    <option value="Coyhaique">Coyhaique</option>
                    <option value="Punta Arenas">Punta Arenas</option>
                    <option value="Santiago">Santiago</option>
                    <option value="Valdivia">Valdivia</option>
                    <option value="Arica">Arica</option>
                </select>
                <select class="custom-select" id="selector-vehiculos">
                    <option selected id="auto-selector">Seleccione el tipo de vehiculo</option>
                    <option value="renegade">Renegade</option>
                    <option value="kia-sportage">Kia Sportage</option>
                    <option value="yaris">Toyota Yaris</option>
                    <option value="camaro">Camaro v.16</option>
                </select>
                <div class="row">
                    <div class="col-md-4 offset-md-4 ">
                        <button type="button" class="btn btn-outline-primary" id="boton" data-toggle="modal" data-target="#exampleModal">Calcular</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
      
      <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Ninja Motor Ride</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                <p id="origen"></p>
                <p id="destino"></p>
                <p id="auto"></p>
                <p id="info"></p>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-outline-primary" id="boton2" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="main.js" type="text/javascripts"></script>
    <script>

        const capitales ={
            'Iquique'        :[-20.21326, -70.15027],
            'Antofagasta'    :[-23.65236, -70.3954],
            'Copiapó'        :[-27.3665301,-70.3344313,17],
            'La Serena'      :[-29.90453, -71.24894],
            'Valparaíso'     :[-33.036, -71.62963],
            'Rancagua'       :[-34.17083, -70.74444],
            'Talca'          :[-35.4264, -71.65542],
            'Concepción'     :[-36.82699, -73.04977],
            'Puerto Montt'   :[-41.4693, -72.94237],
            'Coyhaique'      :[-45.571201,-72.0706575],
            'Punta Arenas'   :[-53.1629757,-70.9100854],
            'Santiago'       :[-33.45694, -70.64827],
            'Valdivia'       :[-39.8141973,-73.2481018],
            'Arica'          :[-18.4746, -70.29792],
        }

        const autos ={
            'renegade'    : 9.5,
            'kia-sportage': 11,
            'yaris'       : 14,
            'camaro'      : 10.6,
        }
        $('#boton').on('click',function(){
            let ciudad_origen = $('#ciudad_origen').val();
            let ciudad_destino = $('#ciudad_destino').val();
            let auto =$('#selector-vehiculos').val();

            let coor_origen = capitales[ciudad_origen];
            let coor_destino = capitales[ciudad_destino];
            let rendimiento = autos[auto];

            fetch( `https://maps.googleapis.com/maps/api/distancematrix/json?origins=${coor_origen[0]},${coor_origen[1]}&destinations=${coor_destino[0]},${coor_destino[1]}&key=AIzaSyAlDSRLGoUqLzoFZQlR7wvyRoNdsufoQls`)
				.then(function(datos) {
					return datos.json();
				})
				.then(function(datos_json) {
                    let distancia = datos_json['rows'][0]['elements'][0]['distance']['value']/1000;
                    console.log(datos_json);
                    let rendir = distancia/rendimiento;
                    $('#origen').html(`Ciudad de origen   : ${ciudad_origen} `);
                    $('#destino').html(`Ciudad de destino  : ${ciudad_destino} `);
                    $('#info').html(`La distancia entre ciudades es de: ${Math.round(distancia)} km y se necesitara ${Math.round(rendir)} lts, de combustible`);
				})
				.catch(function(error) {
					alert(`Error: ${error}`);
                });
            
        })
    </script>
</body>
</html>